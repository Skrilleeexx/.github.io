<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>SOS Dev Attendance</title>
    
</head>
<body class="bg-dark">
  <div class="container-md 9">
    <div class="row">
      <div class="col-9">
        
      </div>
      <div class="col-4">
        <img class="logo" src="logo.png" alt="dev logo" srcset="" >
        <h2>YEAR END ATTENDANCE</h2>
        <p>Align the QR code within the frame to scan</p>
        <div id="reader"></div>
        <br>
        <div class="btn btn-warning" id="result"> </div>
    <br><br>
    <form action="https://sheetdb.io/api/v1/jxhodxwvcf83g" method="post" id="sheetdb-form">
      <input type="hidden" id="timestampInput" name="data[Time Arrived]" readonly>
      <input type="hidden" id="dataInput" name="data[Name]" required>
      <input type="submit" class="btn btn-primary" value="Confirm">
    </form>
      </div>
      <div class="col-6" id="list">
        <center>
          <br>
          <h4>WELCOME TO</h4>
          <h2><strong>DEV TEAM SOIREE 2023</strong></h2>
        </center>
        <iframe src="https://script.google.com/macros/s/AKfycbyawBbbFipBDMnTWSIG8ZiRPFm9rq6flWPYikn87ZzEMl8aXYEbNJaFZOMcSwWmL8uFCQ/exec" width="100%" height="100%" frameborder=""></iframe>
      </div>
    </div>
  </div>

<!-- ================================================================================================================================= -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
<script src="https://unpkg.com/html5-qrcode"></script> 
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="script.js"></script>
<!-- <script>
  function updateTimestamp() {
    var currentDate = new Date();
    var timestamp = currentDate.toLocaleString(); 
    document.getElementById("timestampInput").value = timestamp;
  }
  updateTimestamp();
  setInterval(updateTimestamp, 1000);
</script> -->
<script>
  function updateTime() {
      var currentTime = new Date();
      var hours = currentTime.getHours();
      var minutes = currentTime.getMinutes();
      var seconds = currentTime.getSeconds();

      minutes = minutes < 10 ? "0" + minutes : minutes;
      seconds = seconds < 10 ? "0" + seconds : seconds;

      if (hours >= 12 && hours < 24){
        var formattedTime = hours - 12 + ":" + minutes + ":" + seconds + " PM";
      }else {
        if (hours == 0){
          hours = hours = 12;
        }
        var formattedTime = hours + ":" + minutes + ":" + seconds + " AM";
      }
      document.getElementById("timestampInput").value = formattedTime;
  }

  updateTime();
  setInterval(updateTime, 1000);
</script>
<script>
  var form = document.getElementById('sheetdb-form');
  form.addEventListener("submit", e => {
    e.preventDefault();
    fetch(form.action, {
        method : "POST",
        body: new FormData(document.getElementById("sheetdb-form")),
    }).then(
        response => response.json()
    ).then((html) => {
      window.alert("Login Successfully");
    }).then((html) => {
      document.getElementById('result').innerHTML = '';
      location.reload();
    });
  });
</script>
</body>
</html>
